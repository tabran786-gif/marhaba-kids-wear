<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Marhaba Kids Wear | Banswara</title>

  <!-- CSS -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

</head>
<body>

<!-- ================= HEADER ================= -->
<header class="header">
  <h1>üõçÔ∏è Marhaba Kids Wear</h1>
  <p>Nai Abadi, Banswara (RJ)</p>
  <p>üìû 7972174183</p>

  <div class="top-buttons">
    <a href="order.html">
      <button class="cart-btn">
        <i class="fa-solid fa-cart-shopping"></i> Cart
      </button>
    </a>
<a href="my-orders.html">
  <button>My Orders</button>
</a>

    <a href="login.html">
      <button class="admin-btn">Admin</button>
    </a>
  </div>
</header>

<!-- ================= PRODUCTS ================= -->
<h2 style="text-align:center">Kids Collection</h2>

<div id="productList" class="products"></div>

<!-- ================= FOOTER ================= -->
<footer class="footer">
  <p>¬© 2025 Marhaba Kids Wear | Developed by <strong>Mohammed Tabran</strong></p>
</footer>

<!-- ================= FIREBASE v8 ================= -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
  // üîë Firebase Config (SAME AS ADMIN)
  const firebaseConfig = {
   apiKey: "AIzaSyC-LQt9f3q73yAmKpyCuCuYbVqARZ984VU",
  authDomain: "marhaba-kids-wear.firebaseapp.com",
  databaseURL: "https://marhaba-kids-wear-default-rtdb.firebaseio.com",
  projectId: "marhaba-kids-wear",
  storageBucket: "marhaba-kids-wear.firebasestorage.app",
  messagingSenderId: "1048025467592",
  appId: "1:1048025467592:web:8ca02c4791b8f8ac0f73fd"
  };

  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }
</script>

<!-- ================= PRODUCTS LOGIC ================= -->
<script>
document.addEventListener("DOMContentLoaded", function () {

  const productList = document.getElementById("productList");

  firebase.database().ref("products").on("value", function(snapshot) {

    productList.innerHTML = "";

    if (!snapshot.exists()) {
      productList.innerHTML = "<p>No products available</p>";
      return;
    }
snapshot.forEach(child => {
  const p = child.val();
  const id = child.key;

  const sizes = p.sizes || [];

  productList.innerHTML += `
    <div class="product-card">
      <img src="${p.image}" alt="${p.name}">
      <h3>${p.name}</h3>
      <p>${p.desc || ""}</p>
      <strong>‚Çπ${p.price}</strong><br>

      <select id="size-${id}">
        ${sizes.map(s => `<option>${s}</option>`).join("")}
      </select>

      <br><br>
   <button onclick="addToCart(
  '${id}',
  '${p.name}',
  '${p.price}',
  '${p.image}'
)">
  Add to Cart
</button>

    </div>
  `;
});


  });

});

// üõí ADD TO CART
function addToCart(id, name, price, image) {
  const sizeSelect = document.getElementById("size-" + id);
  const selectedSize = sizeSelect ? sizeSelect.value : "";

  if (!selectedSize) {
    alert("Please select a size");
    return;
  }

  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  cart.push({
    id: id,
    name: name,
    price: price,
    image: image,
    size: selectedSize,   // ‚úÖ SIZE SAVED
    qty: 1
  });

  localStorage.setItem("cart", JSON.stringify(cart));
  alert("‚úÖ Product added to cart");
}

</script>

</body>
</html>


